<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Add Action</title>
</head>
<script type="text/javascript" src="library/jquery-3.1.0.min.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$("#submit").click(function() {

			var action_info = "{ " +
									" \"action_name\":\"" + $("#action_name").val() + "\"," +
									"\"action_owner\":\"" + $("#action_owner").val() + "\"," +
									"\"action_input\":\"" + $("#input_para").val() + "\"," +
									"\"action_output\":\"" + $("#output_para").val() + "\"," +
									"\"action_method\":\"" + $("#method").val() + "\"," +
									"\"content_type\":\"" + $("#content_type").val() + "\"," +
									"\"prefix\":\"" + $("#prefix").val() + "\"" + 
								"}";

			var formData = new FormData($('form')[0]);
			formData.append("action_info", action_info);
			console.log("aaa");

			$.ajax({
				url: "http://host:port/operator/insert",
				type: "POST",
		        //Ajax events
		        success: function(data) {
		        	console.log(data);
		        	alert("success !!")
		        	document.location.href="all_action.html";
		        },
		        // Form data
		        data: formData,
		        //Options to tell jQuery not to process data or worry about content-type.
		        cache: false,
		        contentType: false,
		        processData: false

			});



		});
	});

</script>
<body>
	<h1>New Action</h1>

		<label>Action Name:</label>
		<input id="action_name" type="text"><br />
		<label>Action Owner: </label>
		<input type="text" id="action_owner"><br />
		<label>Input Parameter Format</label>
		<input type="text" id="input_para"><br />
		<label>Output Parameter Format</label>
		<input type="text" id="output_para"><br />
		<label for="">Htpp Method</label>
		<input type="text" id="method"><br />
		<label for="">Http Content Type</label>
		<input type="text" id="content_type"><br />
		<label for="">Resource Prefix</label>
		<input type="text" id="prefix"><br />
	<form enctype="multipart/form-data">
		<label>Package File</label>
		<input type="file" name="file"><br />
		<input type="button" id="submit" value="Submit">
	</form>
	<br><br><br><br>
	<a href="index.html">Back</a>
</body>
</html>